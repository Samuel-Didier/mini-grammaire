<header class="dashboard-header">
    <h1>Toutes nos Astuces ‚ú®</h1>
    <p>Explorez nos conseils pour ma√Ætriser les subtilit√©s du fran√ßais.</p>
    <a href="/mes-favoris">Astuces favorites</a>
</header>

<div class="tips-grid">
    <repeat group="{{ @astuces }}" value="{{ @astuce }}">
        <div class="tip-card">
            <h3>{{ @astuce.titre }}</h3>
            <p>{{ @astuce.description }}</p>
            <button class="btn-favori {{ @astuce.is_favori ? 'active' : '' }}" onclick="toggleFavori({{ @astuce.id }}, this)" title="Ajouter aux favoris">
                {{ @astuce.is_favori ? '‚ù§Ô∏è' : 'ü§ç' }}
            </button>
        </div>
    </repeat>
</div>

<script>
function toggleFavori(id, btn) {
    fetch('/favori/toggle/' + id, {
        method: 'POST'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            if (data.action === 'added') {
                btn.innerHTML = '‚ù§Ô∏è';
                btn.classList.add('active');
            } else {
                btn.innerHTML = 'ü§ç';
                btn.classList.remove('active');
            }
        } else {
            alert(data.message);
        }
    })
    .catch(error => console.error('Erreur:', error));
}
</script>

<style>
.tip-card {
    position: relative;
}
.btn-favori {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.5rem;
    transition: transform 0.2s;
}
.btn-favori:hover {
    transform: scale(1.2);
}
</style>